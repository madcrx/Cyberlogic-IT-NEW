function generateImagePlaceholder(e,t,o=""){const r=document.createElement("canvas");r.width=e,r.height=t;const a=r.getContext("2d"),s=a.createLinearGradient(0,0,e,t);return s.addColorStop(0,"#E89523"),s.addColorStop(1,"#F2A843"),a.fillStyle=s,a.fillRect(0,0,e,t),o&&(a.fillStyle="white",a.font="bold 24px Arial",a.textAlign="center",a.textBaseline="middle",a.fillText(o,e/2,t/2)),r.toDataURL()}!function(){"use strict";class e{constructor(){this.supportsWebP=!1,this.init()}async init(){this.supportsWebP=await new Promise(e=>{const t=new Image;t.onload=t.onerror=function(){e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}),console.log("WebP Support: "+(this.supportsWebP?"Yes":"No")),this.processImages(),this.observeNewImages()}processImages(){document.querySelectorAll("img[data-src], img[src]").forEach(e=>this.optimizeImage(e))}optimizeImage(e){if("true"===e.dataset.optimized)return;const t=e.dataset.src||e.src;if(t&&!t.startsWith("data:")){if(this.supportsWebP){const o=this.getWebPVersion(t);e.parentElement&&"PICTURE"===e.parentElement.tagName||this.wrapInPicture(e,o,t)}this.addLazyLoading(e),e.dataset.optimized="true"}}getWebPVersion(e){const t=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(t)?e.replace(/\.(jpg|jpeg|png|gif)$/i,".webp"):e}wrapInPicture(e,t,o){const r=document.createElement("picture"),a=document.createElement("source");a.srcset=t,a.type="image/webp";const s=document.createElement("source");s.srcset=o;const i=e.cloneNode(!0);i.src=o,r.appendChild(a),r.appendChild(s),r.appendChild(i),e.parentNode&&e.parentNode.replaceChild(r,e)}addLazyLoading(e){"loading"in HTMLImageElement.prototype?e.loading="lazy":this.lazyLoadWithObserver(e)}lazyLoadWithObserver(e){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target;o.dataset.src&&(o.src=o.dataset.src,o.removeAttribute("data-src")),t.unobserve(o)}})},{rootMargin:"50px"});t.observe(e)}observeNewImages(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{"IMG"===e.tagName?this.optimizeImage(e):e.querySelectorAll&&e.querySelectorAll("img").forEach(e=>{this.optimizeImage(e)})})})}).observe(document.body,{childList:!0,subtree:!0})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new e}):new e}(),"undefined"!=typeof module&&module.exports&&(module.exports={generateImagePlaceholder:generateImagePlaceholder});